# Log File of Evaluation on GPT-2 Model Generated Myanmar Hatespeech Sentences with PPL

Hatespeech á€…á€¬á€€á€¼á€±á€¬á€„á€ºá€¸ á€á€…á€ºá€á€±á€¬á€„á€ºá€¸á€á€”á€ºá€· á€”á€²á€· á€†á€±á€¬á€€á€ºá€‘á€¬á€¸á€á€²á€· GPT-2 model á€€á€­á€¯ á€á€¯á€¶á€¸á€•á€¼á€®á€¸ á€™á€¼á€”á€ºá€™á€¬á€…á€¬ hatespeech á€…á€¬á€€á€¼á€±á€¬á€„á€ºá€¸á€á€½á€±á€€á€­á€¯ generate á€œá€¯á€•á€ºá€€á€¼á€Šá€ºá€·á€á€²á€·á€•á€«á€á€šá€ºá‹ á€¡á€²á€’á€® testset á…á€…á€¯á€¶á€€á€­á€¯ Language Model á€á€…á€ºá€á€¯ á€†á€±á€¬á€€á€ºá€•á€¼á€®á€¸ PPL á€á€­á€¯á€„á€ºá€¸á€€á€¼á€Šá€ºá€·á€á€²á€· log á€–á€­á€¯á€„á€º á€•á€«á‹  

## Corpus Information

syllable segmentation á€œá€¯á€•á€ºá€‘á€¬á€¸á€á€²á€· LU Lab. in-house corpus á€›á€²á€· information á€€ á€¡á€±á€¬á€€á€ºá€•á€«á€¡á€á€­á€¯á€„á€ºá€¸á€•á€«á‹  

```
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc$ ls
segmentation-data-updated2.cleaned.syl
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc$ head -n 3 ./segmentation-data-updated2.cleaned.syl
á€œá€¯ á€á€¬ á€™á€±á€¬á€„á€ºá€¸ á€•á€¼á€­á€¯á€„á€º á€á€¬ á€•á€¼á€­á€¯á€„á€º á€€á€­á€¯ á€šá€·á€º á€€á€­á€¯á€šá€º á€•á€­á€¯á€„á€º á€€á€¬á€¸ á€™ á€Ÿá€¯á€á€º á€•á€¼ á€¿ á€”á€¬ á€–á€¼á€…á€º á€›á€„á€º á€‘á€½á€€á€º á€•á€¼á€±á€¸ á€¡á€±á€¸ á€¡á€±á€¸ á€†á€±á€¸ á€†á€±á€¸ á€–á€¼á€…á€º á€á€½á€¬á€¸ á€›á€„á€º á€•á€¼á€”á€º á€™á€±á€¬á€„á€ºá€¸ á€œá€¯ á€á€¬ á€™á€±á€¬á€„á€ºá€¸
á€á€™á€¹á€™ á€ á€¦á€¸ á€‘á€„á€º á€€á€»á€±á€¬á€º
á€¡á€„á€ºá€¸ á€œá€±á€¸ á€á€° á€†á€­á€¯ á€œá€Šá€ºá€¸ á€€á€±á€¬á€„á€ºá€¸ á€á€¬ á€•á€² á€€á€…á€º á€€á€…á€º á€€ á€–á€¼á€° á€–á€¼á€° á€–á€½á€±á€¸ á€–á€½á€±á€¸ á€œá€±á€¸ á€†á€­á€¯ á€á€±á€¬á€· á€›á€¾á€™á€ºá€¸ á€™ á€œá€±á€¸ á€á€½á€± á€á€±á€¬á€· á€‘á€­á€¯á€„á€º á€„á€­á€¯ á€”á€± á€á€±á€¬á€· á€™á€¾á€¬ á€•á€² á€¡á€„á€ºá€¸ á€œá€±á€¸ á€€á€­á€¯ á€¡ á€›á€™á€ºá€¸ á€á€»á€…á€º á€á€šá€º á€¡á€„á€ºá€¸ á€œá€±á€¸ á€”á€²á€· á€€á€…á€º á€”á€²á€· á€œá€­á€¯á€€á€º á€•á€« á€á€šá€º á€ á€á€€á€º á€œá€¯á€¶á€¸ á€ á€€á€šá€º á€œá€¬ á€”á€± á€›á€„á€º á€¡ á€›á€™á€ºá€¸ á€€á€±á€¬á€„á€ºá€¸ á€™á€¾á€¬ á€•á€² á€á€»á€…á€º á€á€šá€º á€™ á€€á€…á€º á€‡á€„á€º á€‡á€„á€º á€á€­á€¯á€· á€™á€½á€”á€º á€•á€¼á€Šá€º á€”á€šá€º á€œá€¬ á€œá€Šá€º á€•á€« á€œá€¬á€¸ á€–á€­á€á€º á€á€±á€«á€º á€•á€« á€á€šá€º á€€á€»á€­á€¯á€€á€º á€‘á€®á€¸ á€›á€­á€¯á€¸ á€˜á€¯ á€›á€¬á€¸ á€–á€°á€¸ á€›á€„á€º á€™á€±á€¬á€º á€œ á€™á€¼á€­á€¯á€„á€º á€™á€¼á€­á€¯á€· á€€á€­á€¯ á€œá€¬ á€œá€Šá€º á€•á€« á€›á€¾á€™á€ºá€¸ á€€ á€™á€² á€á€¬ á€œá€¬á€¸ á€¡á€„á€ºá€¸ á€á€° á€™ á€€ á€™á€² á€á€¬ á€œá€¬á€¸ á€™á€° á€€á€¼á€­á€¯ á€€ á€œá€±á€¸ á€™á€±á€¸ á€á€±á€¬á€„á€º á€á€­ á€á€šá€º á€¡á€„á€ºá€¸ á€á€° á€™ á€€ á€˜á€šá€º á€œá€±á€¬á€€á€º á€•á€² á€•á€­á€¯á€€á€º á€†á€¶ á€›á€¾á€­ á€•á€« á€…á€± á€¡ á€œá€±á€¬á€„á€ºá€¸ á€…á€Šá€º á€á€° á€™á€„á€ºá€¸ á€€á€»á€­á€”á€º á€…á€¬ á€á€­á€¯á€€á€º á€á€²á€· á€œá€­á€¯á€· á€›á€± á€á€¼á€¶ á€›á€±á€¬ á€€á€¯á€”á€ºá€¸ á€á€¼á€¶ á€›á€±á€¬ á€€á€¯á€”á€ºá€¸ á€”á€± á€¡á€±á€¬á€„á€º á€œá€¯á€•á€º á€› á€á€¬ á€–á€¼á€° á€”á€± á€¥á€®á€¸ á€™á€šá€º á€¡ á€á€¬á€¸ á€€ á€€á€¼ á€Šá€·á€º á€•á€¼á€±á€¬ á€¡á€„á€ºá€¸ á€á€° á€™ á€œá€¯á€•á€º á€›á€„á€º á€›á€± á€€á€°á€¸ á€á€á€º á€› á€™á€šá€º á€”á€±á€¬á€º á€›á€± á€™ á€€á€°á€¸ á€á€á€º á€›á€„á€º á€¡ á€œá€±á€¬á€„á€ºá€¸ á€á€½á€± á€á€¯ á€á€»á€­á€”á€º á€‘á€­ á€†á€šá€º á€™ á€€á€¯á€”á€º á€á€±á€¸ á€˜á€°á€¸ á€¡ á€á€² á€™ á€™ á€€á€…á€º á€á€»á€…á€º á€œá€­á€¯á€€á€º á€á€¬ á€€á€±á€¬á€„á€ºá€¸ á€á€šá€º á€œá€¯á€•á€º á€•á€…á€º á€œá€­á€¯á€€á€º á€¡ á€™ á€€á€…á€º á€á€¬ á€”á€± á€›á€„á€º á€›á€¾á€™á€ºá€¸ á€•á€¼á€Šá€º á€¡ á€•á€¼á€®á€¸ á€•á€¼á€”á€º á€œá€¬ á€™á€šá€º á€”á€± á€”á€­á€¯á€„á€º á€œá€¬á€¸ á€˜ á€ á€€á€­á€¯ á€–á€¼á€á€º á€á€”á€ºá€¸ á€á€²á€· á€¡ á€á€« á€¡ á€›á€­á€¯á€¸ á€†á€¯á€¶á€¸ á€€ á€¡ á€€á€±á€¬á€„á€ºá€¸ á€†á€¯á€¶á€¸ á€•á€« á€•á€² á€™ á€œá€¯á€•á€º á€•á€« á€”á€²á€· á€€á€…á€º á€œá€±á€¸ á€›á€šá€º á€›á€”á€º á€€á€¯á€”á€º á€€á€­á€¯ á€¡ á€™á€¼á€”á€º á€•á€¼á€”á€º á€œá€¬ á€•á€« á€€á€­á€¯á€šá€º á€¡ á€›á€™á€ºá€¸ á€ á€á€­ á€› á€œá€­á€¯á€· á€•á€« á€€á€½á€¬ á€á€»á€…á€º á€á€¬ á€á€»á€…á€º á€… á€›á€¬ á€œá€±á€¸ á€¡ á€›á€™á€ºá€¸ á€€á€¼á€­á€¯á€€á€º á€™ á€™ á€”á€± á€•á€« á€€á€…á€º á€œá€±á€¸ á€›á€šá€º á€á€¬ á€šá€¬ á€œá€­á€¯á€€á€º á€á€¬ á€¡á€²á€· á€”á€¬á€¸ á€™á€¾á€¬ á€¡á€­á€™á€º á€á€…á€º á€œá€¯á€¶á€¸ á€á€½á€¬á€¸ á€á€šá€º á€œá€­á€¯á€€á€º á€™á€¾á€¬ á€•á€±á€«á€·
```

filesize information:  

```
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc$ wc ./segmentation-data-updated2.cleaned.syl
  212836  7094461 69535996 ./segmentation-data-updated2.cleaned.syl
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc$
```

## Hatespeech Corpus Information

I also need to add Hatespeech data ...  
á€™á€Ÿá€¬á€á€”á€ºá€¸á€€á€»á€±á€¬á€„á€ºá€¸á€á€° á€”á€”á€ºá€¸á€£á€”á€¹á€’á€¼á€±á€€á€»á€±á€¬á€º á€…á€¯á€•á€±á€¸á€‘á€¬á€¸á€á€²á€· hatespeech corpus á€€á€­á€¯á€œá€Šá€ºá€¸ corpus á€™á€¾á€¬ á€•á€±á€«á€„á€ºá€¸á€‘á€Šá€ºá€·á€™á€¾ á€¡á€†á€„á€ºá€•á€¼á€±á€™á€¾á€¬á€™á€­á€¯á€· á€¡á€²á€’á€® corpus á€€á€­á€¯á€œá€Šá€ºá€¸ á€¡á€‘á€€á€ºá€€ corpus á€”á€²á€· á€•á€±á€«á€„á€ºá€¸á€–á€­á€¯á€·á€•á€¼á€„á€ºá€†á€„á€ºá€á€²á€·á€á€šá€ºá‹  

```
(base) ye@lst-gpu-3090:~/exp/myHatespeech/nanoGPT/myHatespeech_char$ head hs_data_4Oct2023.clean.txt
á€–á€±á€¬á€ºá€œá€±á€¬á€ºá€™á€±á€¬á€º á€™ á€Ÿá€¯á€á€º á€œá€­á€¯á€· á€•á€±á€«á€· ğŸ¤£ ğŸ¤£
á€”á€¬á€¸ á€€á€­á€¯ á€™ á€œá€Šá€º á€á€¬
á€†á€±á€¬á€€á€ºá€™á€¼á€„á€ºá€€á€•á€º á€‘á€„á€º á€á€¬ á€•á€²
á€€á€½á€™á€ºá€¸á€šá€¬ á€™á€¾á€¬ á€‘á€Šá€·á€º á€…á€¬á€¸ á€á€²á€· á€…á€™á€¯á€”á€ºá€…á€•á€«á€¸ á€‘á€„á€º á€á€šá€º
á€–á€œá€±á€¬á€ºá€™á€±á€¬á€º next version
á€„á€« á€œá€Šá€ºá€¸ á€á€­ á€á€»á€„á€º á€”á€± á€á€¬ ğŸ˜ á€¡á€²á€·á€œá€­á€¯ á€…á€€á€¬á€¸ á€á€½á€± á€€á€» á€”á€¬á€¸á€™á€œá€Šá€º á€œá€­á€¯á€· á€á€„á€º á€•á€±á€¸ á€€á€¼ á€•á€« á€¦á€¸ ğŸ˜‚
á€„á€« á€™ á€á€­ á€œá€­á€¯á€· á€€á€­á€¯á€€á€­á€¯á€· á€€á€­á€¯ á€™á€±á€¸ á€€á€¼á€Šá€ºá€· á€á€¬ á€€á€­á€¯á€€á€­á€¯ á€€ á€œá€Šá€ºá€¸ baby á€€ á€œá€½á€² á€›á€„á€º á€™ á€á€­ á€˜á€°á€¸ á€á€²á€· ğŸ¥º
á€–á€±á€¬á€ºá€œá€±á€¬á€ºá€™á€±á€¬á€º á€”á€²á€· á€Šá€®á€™ á€á€±á€¬á€º á€á€šá€º á€œá€± ğŸ˜¬
sá€™á€½á€±á€¸ á€€á€¼á€®á€¸ á€á€²á€· ğŸ˜‚
$á€™á€½á€¾á€±á€¸ á€•á€«
```

tail command output á€€ á€¡á€±á€¬á€€á€ºá€•á€«á€¡á€á€­á€¯á€„á€ºá€¸á‹  
á€™á€¼á€„á€ºá€›á€á€²á€·á€¡á€á€­á€¯á€„á€ºá€¸ á€’á€® corpus á€€á€œá€Šá€ºá€¸ word segmentation á€œá€¯á€•á€ºá€™á€‘á€¬á€¸á€•á€«á€˜á€°á€¸á‹  

```
(base) ye@lst-gpu-3090:~/exp/myHatespeech/nanoGPT/myHatespeech_char$ tail hs_data_4Oct2023.clean.txt
á€á€°á€· á€€á€­á€¯ á€˜á€¬ á€€á€¼á€Šá€·á€º á€•á€¼á€®á€¸ vote á€•á€±á€¸ á€€á€¼ á€á€¬ á€•á€« á€œá€­á€™á€·á€º $á€›á€°á€¸á€™ á€˜á€¬ á€™ á€Ÿá€¯á€á€º á€á€²á€· á€€á€­á€…á€¹á€… á€€á€¼á€±á€¬á€„á€·á€º á€›á€½á€¾á€±á€€á€¼á€­á€¯ á€¡á€á€½á€„á€·á€ºá€¡á€›á€±á€¸ á€€á€­á€¯ á€†á€¯á€¶á€¸á€›á€¾á€¯á€¶á€¸ á€™ á€á€¶ á€”á€­á€¯á€„á€º á€œá€­á€¯á€· á€†á€­á€¯ á€•á€¼á€®á€¸ á€•á€¼á€±á€¬ á€á€²á€· $á€›á€°á€¸á€™
á€–á€„á€ºá€¡á€›á€¾á€Šá€ºá€€á€¼á€®á€¸á€á€¶á€œá€­á€¯á€€á€º á€á€…á€ºá€á€«á€á€Šá€ºá€¸ á€¡á€€á€¯á€”á€º á€€á€¼á€­á€¯ á€•á€¼á€®á€¸ á€á€¬á€¸ á€•á€² ğŸ¦­
á€¡á€­á€•á€ºá€™á€€á€º á€€ á€¡á€™ á€á€…á€º á€šá€±á€¬á€€á€º á€•á€² á€›á€¾á€­ á€á€¬ á€œá€¬á€¸ ğŸ¥²
SattPatt !! á€˜á€¬ á€™ á€Ÿá€¯á€á€º á€á€²á€· á€•á€¼á€¿á€”á€¬ á€á€²á€· PayloeeeMaaaGGG
á€…á€±á€¬á€€á€ºá€†á€„á€·á€ºá€™á€›á€¾á€­ á€á€²á€· á€Ÿá€¬ á€á€½á€± á€€ á€œá€Šá€ºá€¸ á€¡á€á€¯á€á€œá€±á€¬ á€á€•á€ºá€…á€­á€•á€ºá€…á€­á€•á€º á€á€½á€±á€· á€œá€¬ á€› á€á€šá€º ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤£ á€›á€±á€¸ á€á€»á€„á€º á€œá€½á€”á€ºá€¸ á€œá€­á€¯á€· á€™ á€Ÿá€¯á€á€º á€˜á€°á€¸ á€”á€±á€¬á€º á€›á€¾á€€á€º á€á€á€º á€¥á€®á€¸ á€™ á€œá€¬á€¸ á€œá€­á€¯á€· á€á€„á€·á€º á€™á€”á€·á€º á€á€¬
á€˜á€¬ á€™ á€Ÿá€¯á€á€º á€á€¬ á€œá€±á€¸ á€á€²á€· á€¡á€¬á€· á€†á€­á€¯ á€Ÿá€¯á€á€º á€á€²á€· á€Ÿá€¬ á€˜á€±á€¬á€•á€²á€™á€”á€± á€”á€±á€¬á€º á€¡á€™á€€á€¼á€®á€¸
á€‘á€™á€„á€ºá€¸á€…á€¬á€¸á€á€­á€¯á€„á€ºá€¸á€œá€°á€™á€–á€¼á€…á€ºá€”á€­á€¯á€„á€ºá€˜á€°á€¸ á€†á€­á€¯ á€á€¬ á€á€¯ á€™á€¾ á€¡á€›á€¾á€„á€ºá€œá€á€ºá€œá€á€º á€™á€¼á€„á€º á€–á€°á€¸ á€á€±á€¬á€· á€á€šá€º á€€á€±á€¬á€„á€ºá€™ á€™á€½á€±á€¸á€€á€á€Šá€ºá€¸á€€á€¡á€á€±á€œá€±á€¸á€™á€½á€±á€¸á€œá€¬á€›á€™á€¾á€¬
á€¡á€±á€¬á€º á€˜á€¬ á€™ á€Ÿá€¯á€á€º á€á€¬ á€á€²á€· á€œá€¬á€¸ á€•á€¼á€±á€¬á€‘á€½á€€á€ºá€á€²á€·á€•á€«á€¸á€…á€•á€ºá€œá€±á€¸á€€á€­á€¯á€¡á€€á€ºá€†á€…á€ºá€œá€±á€¸á€”á€²á€·á€á€½á€¬á€¸á€†á€±á€¸á€…á€±á€á€»á€„á€º
á€—á€”á€ºá€¸á€€á€­á€¯á€„á€º á€”á€²á€· á€™á€¡á€œ á€˜á€±á€¬á€€á€­á€¯á€„á€º
á€…á€­á€á€ºá€™á€•á€° á€”á€²á€· á€›á€½á€¾á€±á€€á€¼á€­á€¯ á€•á€¼á€®á€¸ á€›á€„á€º á€–á€„á€ºá€á€¶ á€› á€™á€¾á€¬ á€Šá€®á€™á€œá€±á€¸ fighting 22 á€”á€¾á€…á€º á€€ á€„á€« 25 á€”á€¾á€…á€º á€‘á€€á€º á€¡á€­á€¯ á€”á€± á€á€±á€¬á€· á€¡á€¬á€¸ á€á€±á€¬á€„á€º á€”á€¬ á€á€šá€º ğŸ˜‚ ğŸ˜‚
(base) ye@lst-gpu-3090:~/exp/myHatespeech/nanoGPT/myHatespeech_char$
```

Copied above file to the LM building folder.  
á€¡á€‘á€€á€ºá€•á€« corpus á€–á€­á€¯á€„á€º á€”á€¾á€…á€ºá€–á€­á€¯á€„á€ºá€€á€­á€¯ ppl á€á€½á€€á€ºá€™á€šá€ºá€· á€–á€­á€¯á€œá€ºá€’á€«á€†á€®á€€á€­á€¯ á€€á€±á€¬á€ºá€•á€®á€€á€°á€¸á€šá€°á€á€²á€·á€á€šá€ºá‹  

```
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc$ cp /home/ye/exp/myHatespeech/nanoGPT/myHatespeech_char/hs_data_4Oct2023.clean.txt .
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc$ wc ./hs_data_4Oct2023.clean.txt
  10140  171358 2172104 ./hs_data_4Oct2023.clean.txt
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc$
```

## Syllable Breaking for Hatespeech Data

á€‘á€¯á€¶á€¸á€…á€¶á€¡á€á€­á€¯á€„á€ºá€¸á€•á€² á€™á€¼á€”á€ºá€™á€¬á€…á€¬á€›á€²á€· word segmentation á€™á€¾á€¬á€€ 100% á€™á€¾á€”á€ºá€á€¬ á€™á€›á€¾á€­á€œá€­á€¯á€· syllable á€”á€²á€·á€•á€²á€–á€¼á€á€ºá€•á€¼á€®á€¸ language model á€†á€±á€¬á€€á€ºá€™á€šá€ºá€œá€­á€¯á€· á€†á€¯á€¶á€¸á€–á€¼á€á€ºá€á€²á€·á€á€šá€ºá‹  
Downloading sylbreak.pl to the server machine:   

```
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc$ wget https://raw.githubusercontent.com/ye-kyaw-thu/sylbreak/master/perl/sylbreak.pl
--2023-10-23 16:03:43--  https://raw.githubusercontent.com/ye-kyaw-thu/sylbreak/master/perl/sylbreak.pl
Resolving raw.githubusercontent.com (raw.githubusercontent.com)... 185.199.110.133, 185.199.109.133, 185.199.108.133, ...
Connecting to raw.githubusercontent.com (raw.githubusercontent.com)|185.199.110.133|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 2356 (2.3K) [text/plain]
Saving to: â€˜sylbreak.plâ€™

sylbreak.pl            100%[==========================>]   2.30K  --.-KB/s    in 0s

2023-10-23 16:03:43 (33.2 MB/s) - â€˜sylbreak.plâ€™ saved [2356/2356]

(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc$
```

hatespeech data á€€ syllable segmentation á€™á€œá€¯á€•á€ºá€›á€á€±á€¸á€á€¬á€™á€­á€¯á€· sylbreak perl á€–á€­á€¯á€„á€ºá€€á€­á€¯ á€á€¯á€¶á€¸á€•á€¼á€®á€¸á€á€±á€¬á€· syllable breaking á€œá€¯á€•á€ºá€á€²á€·á€á€šá€ºá‹  
Syllable breaking ...   

```
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc$ perl ./sylbreak.pl -i ./hs_data_4Oct2023.clean.txt -s " " > ./hs_data_4Oct2023.clean.txt.syl
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc$
```

make confirmation ...  

```
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc$ head ./hs_data_4Oct2023.clean.txt.syl
á€–á€±á€¬á€º á€œá€±á€¬á€º á€™á€±á€¬á€º á€™ á€Ÿá€¯á€á€º á€œá€­á€¯á€· á€•á€±á€«á€· ğŸ¤£ ğŸ¤£
á€”á€¬á€¸ á€€á€­á€¯ á€™ á€œá€Šá€º á€á€¬
á€†á€±á€¬á€€á€º á€™á€¼á€„á€º á€€á€•á€º á€‘á€„á€º á€á€¬ á€•á€²
á€€á€½á€™á€ºá€¸ á€šá€¬ á€™á€¾á€¬ á€‘ á€Šá€·á€º á€…á€¬á€¸ á€á€²á€· á€… á€™á€¯á€”á€º á€… á€•á€«á€¸ á€‘á€„á€º á€á€šá€º
á€– á€œá€±á€¬á€º á€™á€±á€¬á€º n e x t v e r s i o n
á€„á€« á€œá€Šá€ºá€¸ á€á€­ á€á€»á€„á€º á€”á€± á€á€¬ ğŸ˜ á€¡á€²á€· á€œá€­á€¯ á€… á€€á€¬á€¸ á€á€½á€± á€€á€» á€”á€¬á€¸ á€™ á€œá€Šá€º á€œá€­á€¯á€· á€á€„á€º á€•á€±á€¸ á€€á€¼ á€•á€« á€¦á€¸ ğŸ˜‚
á€„á€« á€™ á€á€­ á€œá€­á€¯á€· á€€á€­á€¯ á€€á€­á€¯á€· á€€á€­á€¯ á€™á€±á€¸ á€€á€¼á€Šá€ºá€· á€á€¬ á€€á€­á€¯ á€€á€­á€¯ á€€ á€œá€Šá€ºá€¸ b a b y á€€ á€œá€½á€² á€›á€„á€º á€™ á€á€­ á€˜á€°á€¸ á€á€²á€· ğŸ¥º
á€–á€±á€¬á€º á€œá€±á€¬á€º á€™á€±á€¬á€º á€”á€²á€· á€Šá€® á€™ á€á€±á€¬á€º á€á€šá€º á€œá€± ğŸ˜¬
s á€™á€½á€±á€¸ á€€á€¼á€®á€¸ á€á€²á€· ğŸ˜‚
$ á€™á€½á€¾á€±á€¸ á€•á€«
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc$
```

## Combining Two Datasets

General domain á€¡á€á€½á€€á€º á€•á€¼á€„á€ºá€‘á€¬á€¸á€á€²á€·á€á€²á€· in-house corpus á€”á€²á€· hatespeech corpus á€”á€¾á€…á€ºá€á€¯á€€á€­á€¯ á€–á€­á€¯á€„á€ºá€á€…á€ºá€–á€­á€¯á€„á€ºá€¡á€–á€¼á€…á€º á€¡á€±á€¬á€€á€ºá€•á€«á€¡á€á€­á€¯á€„á€ºá€¸ á€•á€±á€«á€„á€ºá€¸á€œá€­á€¯á€€á€ºá€á€šá€ºá‹  

```
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc$ cat segmentation-data-updated2.cleaned.syl hs_data_4Oct2023.clean.txt.syl > seg_hs_corpus.txt
```

á€•á€±á€«á€„á€ºá€¸á€•á€¼á€®á€¸á€á€½á€¬á€¸á€á€²á€·á€¡á€á€«á€™á€¾á€¬ filesize information á€€ á€¡á€±á€¬á€€á€ºá€•á€«á€¡á€á€­á€¯á€„á€ºá€¸á€•á€«á‹  

```
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc$ wc seg_hs_corpus.txt
  222976  7335893 71778129 seg_hs_corpus.txt
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc$
```

## KenLM Installation

Statistical language model á€€á€­á€¯ KenLM á€”á€²á€·á€•á€² á€†á€±á€¬á€€á€ºá€™á€šá€ºá€œá€­á€¯á€· á€†á€¯á€¶á€¸á€–á€¼á€á€ºá€á€²á€·á‹  
Clone KenLM ...  

```
(base) ye@lst-gpu-3090:~/tool$ git clone https://github.com/kpu/kenlm
Cloning into 'kenlm'...
remote: Enumerating objects: 14161, done.
remote: Counting objects: 100% (474/474), done.
remote: Compressing objects: 100% (328/328), done.
remote: Total 14161 (delta 162), reused 406 (delta 132), pack-reused 13687
Receiving objects: 100% (14161/14161), 5.91 MiB | 5.57 MiB/s, done.
Resolving deltas: 100% (8042/8042), done.
(base) ye@lst-gpu-3090:~/tool$
```

Check the folder:   

```
(base) ye@lst-gpu-3090:~/tool$ cd kenlm/
(base) ye@lst-gpu-3090:~/tool/kenlm$ ls
BUILDING             compile_query_only.sh  Doxyfile     pyproject.toml  util
clean_query_only.sh  COPYING                LICENSE      python
cmake                COPYING.3              lm           README.md
CMakeLists.txt       COPYING.LESSER.3       MANIFEST.in  setup.py
(base) ye@lst-gpu-3090:~/tool/kenlm$
```

Installation of KenLM on LST Server machine:  

```
(base) ye@lst-gpu-3090:~/tool/kenlm$ mkdir -p build
(base) ye@lst-gpu-3090:~/tool/kenlm$ cd build
(base) ye@lst-gpu-3090:~/tool/kenlm/build$ cmake ..
CMake Deprecation Warning at CMakeLists.txt:1 (cmake_minimum_required):
  Compatibility with CMake < 3.5 will be removed from a future version of
  CMake.

  Update the VERSION argument <min> value or use a ...<max> suffix to tell
  CMake that the project does not need compatibility with older versions.


-- The C compiler identification is GNU 11.4.0
-- The CXX compiler identification is GNU 11.4.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/cc - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/c++ - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Could NOT find Eigen3 (missing: Eigen3_DIR)
-- Found Boost: /usr/lib/x86_64-linux-gnu/cmake/Boost-1.74.0/BoostConfig.cmake (found suitable version "1.74.0", minimum required is "1.41.0") found components: program_options system thread unit_test_framework
-- Found Threads: TRUE
-- Found ZLIB: /usr/lib/x86_64-linux-gnu/libz.so (found version "1.2.11")
-- Found BZip2: /usr/lib/x86_64-linux-gnu/libbz2.so (found version "1.0.8")
-- Looking for BZ2_bzCompressInit
-- Looking for BZ2_bzCompressInit - found
-- Looking for lzma_auto_decoder in /usr/lib/x86_64-linux-gnu/liblzma.so
-- Looking for lzma_auto_decoder in /usr/lib/x86_64-linux-gnu/liblzma.so - found
-- Looking for lzma_easy_encoder in /usr/lib/x86_64-linux-gnu/liblzma.so
-- Looking for lzma_easy_encoder in /usr/lib/x86_64-linux-gnu/liblzma.so - found
-- Looking for lzma_lzma_preset in /usr/lib/x86_64-linux-gnu/liblzma.so
-- Looking for lzma_lzma_preset in /usr/lib/x86_64-linux-gnu/liblzma.so - found
-- Found LibLZMA: /usr/lib/x86_64-linux-gnu/liblzma.so (found version "5.2.5")
-- Looking for clock_gettime in rt
-- Looking for clock_gettime in rt - found
-- Configuring done (1.3s)
-- Generating done (0.0s)
-- Build files have been written to: /home/ye/tool/kenlm/build
(base) ye@lst-gpu-3090:~/tool/kenlm/build$
```

Check number of CPU ...  

```
(base) ye@lst-gpu-3090:~/tool/kenlm/build$ lscpu | grep CPU
CPU op-mode(s):                     32-bit, 64-bit
CPU(s):                             24
On-line CPU(s) list:                0-23
CPU family:                         6
CPU max MHz:                        5100.0000
CPU min MHz:                        800.0000
NUMA node0 CPU(s):                  0-23
(base) ye@lst-gpu-3090:~/tool/kenlm/build$
```

Run make ...  

```
make -j 24
...
...
...
[ 93%] Building CXX object lm/builder/CMakeFiles/lmplz.dir/lmplz_main.cc.o
[ 95%] Building CXX object lm/builder/CMakeFiles/count_ngrams.dir/count_ngrams_main.cc.o
[ 96%] Linking CXX executable ../bin/kenlm_benchmark
[ 96%] Built target kenlm_benchmark
[ 97%] Linking CXX executable ../../bin/filter
[ 97%] Built target filter
[ 98%] Linking CXX executable ../../bin/lmplz
[ 98%] Built target lmplz
[100%] Linking CXX executable ../../bin/count_ngrams
[100%] Built target count_ngrams
(base) ye@lst-gpu-3090:~/tool/kenlm/build$ ls
bin             CMakeFiles           kenlmConfig.cmake  lm        util
CMakeCache.txt  cmake_install.cmake  lib                Makefile
(base) ye@lst-gpu-3090:~/tool/kenlm/build$ cd bin
(base) ye@lst-gpu-3090:~/tool/kenlm/build/bin$ ls
build_binary  filter    kenlm_benchmark  phrase_table_vocab            query
count_ngrams  fragment  lmplz            probing_hash_table_benchmark
(base) ye@lst-gpu-3090:~/tool/kenlm/build/bin$
```

## 5-gram Statistical LM Building

syllable segmented á€’á€±á€á€¬á€€ 5-gram á€™á€±á€¬á€ºá€’á€šá€ºá€œá€±á€¬á€€á€ºá€†á€­á€¯á€›á€„á€º á€¡á€†á€„á€ºá€•á€¼á€±á€•á€«á€á€šá€ºá‹  

```
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc$ time lmplz -o 5 < ./seg_hs_corpus
.txt > lm.5gram.arpa
=== 1/5 Counting and sorting n-grams ===
Reading /home/ye/exp/myHatespeech/eval/ppl_calc/seg_hs_corpus.txt
----5---10---15---20---25---30---35---40---45---50---55---60---65---70---75---80---85---90---95--100
****************************************************************************************************
Unigram tokens 7335893 types 6390
=== 2/5 Calculating and sorting adjusted counts ===
Chain sizes: 1:76680 2:5248165888 3:9840311296 4:15744497664 5:22960726016
Statistics:
1 6390 D1=0.647156 D2=0.938543 D3+=1.45863
2 371227 D1=0.638693 D2=1.06168 D3+=1.44861
3 1971935 D1=0.768907 D2=1.12922 D3+=1.37264
4 3771093 D1=0.859861 D2=1.2009 D3+=1.40137
5 4835909 D1=0.755941 D2=1.62412 D3+=1.60134
Memory estimate for binary LM:
type     MB
probing 223 assuming -p 1.5
probing 258 assuming -r models -p 1.5
trie     97 without quantization
trie     49 assuming -q 8 -b 8 quantization
trie     86 assuming -a 22 array pointer compression
trie     38 assuming -a 22 -q 8 -b 8 array pointer compression and quantization
=== 3/5 Calculating and sorting initial probabilities ===
Chain sizes: 1:76680 2:5939632 3:39438700 4:90506232 5:135405452
----5---10---15---20---25---30---35---40---45---50---55---60---65---70---75---80---85---90---95--100
------------------------------------------------------------------------------------------++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++******************************************************************************************####################################################################################################
=== 4/5 Calculating and writing order-interpolated probabilities ===
Chain sizes: 1:76680 2:5939632 3:39438700 4:90506232 5:135405452
----5---10---15---20---25---30---35---40---45---50---55---60---65---70---75---80---85---90---95--100
------------------------------------------------------------------------------------------++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++******************************************************************************************####################################################################################################
=== 5/5 Writing ARPA model ===
----5---10---15---20---25---30---35---40---45---50---55---60---65---70---75---80---85---90---95--100
------------------------------------------------------------------------------------------++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++****************************************************************************************************
Name:lmplz      VmPeak:52704960 kB      VmRSS:10980 kB  RSSMax:9423100 kB       user:4.88182      sys:2.9611      CPU:7.84296     real:6.59366

real    0m6.600s
user    0m4.883s
sys     0m2.962s
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc$
```

## Check the Statistical LM

Language model á€€á€­á€¯ ARPA format á€”á€²á€·á€•á€² á€á€­á€™á€ºá€¸á€á€²á€·á€á€¬á€™á€­á€¯á€· á€–á€­á€¯á€„á€ºá€¡á€‘á€²á€€á€­á€¯ peek á€œá€¯á€•á€ºá€€á€¼á€Šá€ºá€·á€›á€á€¬ á€¡á€†á€„á€ºá€•á€¼á€±á€•á€«á€á€šá€ºá‹  

```
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc$ head -n 50 ./lm.5gram.arpa
\data\
ngram 1=6390
ngram 2=371227
ngram 3=1971935
ngram 4=3771093
ngram 5=4835909

\1-grams:
-5.525481       <unk>   0
0       <s>     -1.8698267
-2.220042       </s>    0
-3.1793256      á€œá€¯      -0.5695411
-2.6307955      á€á€¬      -0.8018073
-3.1199322      á€™á€±á€¬á€„á€ºá€¸  -0.6105088
-3.0450509      á€•á€¼á€­á€¯á€„á€º  -0.7024183
-2.3082223      á€€á€­á€¯     -1.2794439
-4.298998       á€šá€·á€º     -0.2666081
-2.7623425      á€€á€­á€¯á€šá€º   -0.8561846
-2.9551132      á€•á€­á€¯á€„á€º   -0.65085495
-2.7556262      á€€á€¬á€¸     -0.7490673
-2.3018465      á€™       -1.233987
-2.9216228      á€Ÿá€¯á€á€º    -0.6538618
-2.7101119      á€•á€¼      -0.9647346
-3.7024763      á€¿       -0.32949388
-2.7523067      á€”á€¬      -0.72248787
-2.5004718      á€–á€¼á€…á€º    -1.1543733
-2.6782982      á€›á€„á€º     -0.8826761
-2.81556        á€‘á€½á€€á€º    -0.9175844
-3.0502732      á€•á€¼á€±á€¸    -0.7143059
-2.9625616      á€¡á€±á€¸     -0.7053375
-2.8941834      á€†á€±á€¸     -0.74615747
-2.5275965      á€á€½á€¬á€¸    -1.2112159
-2.6788564      á€•á€¼á€”á€º    -0.967851
-3.2848742      á€á€™á€¹á€™    -1.4597393
-2.5221121      á€       -0.8386894
-2.6901717      á€¦á€¸      -0.88747036
-3.0463505      á€‘á€„á€º     -0.84865737
-2.9657936      á€€á€»á€±á€¬á€º   -0.66401005
-3.1469703      á€¡á€„á€ºá€¸    -0.5767914
-2.5045648      á€œá€±á€¸     -0.9711726
-2.5794568      á€á€°      -1.0010203
-2.5094523      á€†á€­á€¯     -0.9702034
-2.5667617      á€œá€Šá€ºá€¸    -0.9080558
-2.7335382      á€€á€±á€¬á€„á€ºá€¸  -0.87234116
-2.5121071      á€á€¬      -1.030593
-2.5347512      á€•á€²      -0.9389109
-3.2565143      á€€á€…á€º     -0.62175095
-2.2774615      á€€       -1.2609818
-3.0944793      á€–á€¼á€°     -0.5175369
-3.502761       á€–á€½á€±á€¸    -0.5039096
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc$
```

Language model á€›á€²á€· á€”á€±á€¬á€€á€ºá€†á€¯á€¶á€¸ á€¡á€•á€­á€¯á€„á€ºá€¸á€€á€­á€¯á€œá€Šá€ºá€¸ á€™á€»á€€á€ºá€œá€¯á€¶á€¸á€”á€²á€· á€…á€…á€ºá€€á€¼á€Šá€ºá€·á€•á€¼á€®á€¸ confirmation á€œá€¯á€•á€ºá€á€²á€· ...  
á€á€€á€šá€ºá€á€™á€ºá€¸ á€€ emoji á€á€½á€±á€”á€²á€· corpus á€¡á€‘á€²á€™á€¾á€¬ á€•á€«á€á€„á€ºá€”á€±á€á€²á€· symbol á€á€½á€±á€¡á€¬á€¸á€œá€¯á€¶á€¸á€€á€­á€¯á€•á€« syllable á€–á€¼á€á€ºá€á€²á€·á€¡á€á€«á€™á€¾á€¬ English á€…á€¬á€œá€­á€¯á€•á€² á€á€…á€ºá€œá€¯á€¶á€¸á€á€»á€„á€ºá€¸á€…á€® á€–á€¼á€á€ºá€á€¬á€™á€»á€­á€¯á€¸áŠ á€á€­á€¯á€·á€™á€Ÿá€¯á€á€º emoji á€á€½á€±á€€á€­á€¯ corpus á€‘á€²á€€á€”á€± remove á€œá€¯á€•á€ºá€œá€­á€¯á€€á€ºá€á€¬á€™á€»á€­á€¯á€¸ á€œá€¯á€•á€ºá€›á€„á€º á€•á€­á€¯ á€á€­á€á€­á€€á€»á€€á€» measure á€œá€¯á€•á€ºá€œá€­á€¯á€· á€›á€•á€«á€á€šá€ºá‹ á€¡á€á€»á€­á€”á€ºá€€ limit á€–á€¼á€…á€ºá€á€¬á€”á€²á€· á€¡á€€á€¼á€™á€ºá€¸á€•á€² PPL á€á€­á€¯á€„á€ºá€¸á€€á€¼á€Šá€ºá€·á€á€¬á€€á€­á€¯ á€œá€¯á€•á€ºá€€á€¼á€Šá€ºá€·á€™á€šá€ºá‹ á€œá€€á€ºá€›á€¾á€­ á€¡á€”á€±á€¡á€‘á€¬á€¸á€€á€­á€¯ á€á€”á€ºá€·á€™á€¾á€”á€ºá€¸á€œá€­á€¯á€· á€›á€á€¬á€™á€­á€¯á€· ...  

```
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc$ tail -n 50 ./lm.5gram.arpa
-0.45228076     á€›á€„á€º á€–á€„á€º á€•á€« á€œá€­á€¯ -á€¸
-1.0722371      á€”á€±á€· á€›á€±á€¬ á€Š á€›á€±á€¬ ğŸ‘‚ğŸ»
-0.29612365     <s> á€›á€­á€¯á€„á€ºá€¸ á€á€šá€º â€‹ á€†á€±á€¬á€€á€ºâ€‹
-0.45452684     á€ á€›á€¬á€­á€¯ . . .á€¸
-0.85684836     <s> á€œá€° á€œá€­á€™á€º á€™ á€–á€±Ã—á€­á€¯á€¸
-0.36948365     á€á€»á€„á€º á€á€¬ á€á€²á€· á€€á€€á€º á€œá€”á€ºâ€‹
-0.5769707      á€…á€¬á€¸ á€œá€­á€¯á€· á€á€¬ á€•á€² á€…á€±á€¬á€€á€ºâ€‹
-1.48055        <s> á€ á€á€« á€á€Šá€ºá€¸ á€”á€¼á€°á€¸
-1.9312932      á€á€° á€á€½á€± á€€á€» á€á€±á€¬á€· á€¡â€‹
-0.29612365     á€™á€šá€ºá€· á€€ á€œá€±á€¸ â€‹ á€á€±á€¬á€„á€ºâ€‹
-0.4201431      á€á€°á€· á€¡ á€–á€­á€¯á€¸ á€œá€¯á€•á€º á€›á€•á€ºâ€‹
-0.45505774     <s> á€¡á€¬á€· á€™ á€¡á€± á€œá€­á€¯á€¸â€‹
-0.57081354     á€œá€­á€¯ á€¡ á€…á€¬á€¸ á€‘á€² á€•á€²â€‹
-1.1072607      á€¡ á€–á€± á€€á€­á€¯ á€ xá€º
-0.4495237      á€€á€­á€¯ á€›á€±á€¬ á€„á€« á€ xá€º
-0.3659513      á€ á€á€„á€ºá€¸ á€œá€¯á€•á€º â€‹ á€•á€¼á€±á€¬â€‹
-0.57687056     á€€á€±á€¬á€€á€º á€€á€­á€¯ á€–á€„á€º á€á€­á€¯á€„á€ºá€¸ Xá€­á€¯á€¸
-1.3425193      á€› á€á€¬ á€€á€¶ á€€á€±á€¬á€„á€ºá€¸ á€â€Œá€¬
-1.2453475      á€–á€„á€º á€á€¬ á€á€¶ á€œá€­á€¯á€€á€º â€‹á€±
-0.2287815      á€á€¬ á€á€¶ á€œá€­á€¯á€€á€º â€‹á€± $á€¬á€€á€º
-0.90751475     á€› á€œá€¬ á€á€šá€º á€†á€­á€¯ á€á€±á€¬á€·â€‹
-0.57866645     á€‘á€„á€º á€”á€± á€á€²á€· á€œ á€•á€»á€½á€á€º
-0.5999915      á€á€šá€º á€á€½á€±á€¸ á€œá€±á€¸ á€á€½á€± ğŸ˜­ğŸ˜­ğŸ˜­
-0.4497082      á€šá€¯á€á€º á€™á€¬ á€á€½á€± á€”á€„á€º á€á€­á€¯á€·â€‹
-3.1098154      á€œá€² á€™ á€á€­ á€˜á€°á€¸ ğŸ¤«ğŸ¤«ğŸ¤«
-0.91051775     á€™á€»á€¬á€¸ á€…á€¯ á€…á€Šá€ºá€¸ á€›á€¬ ğŸ™‚ğŸ–•
-0.45533326     á€¡á€± á€˜á€±á€¸ á€á€½á€± á€› ğŸ˜ğŸ–•ğŸ–•
-0.45566383     á€‚á€»á€­á€¯á€¸ á€›á€¾á€®á€¸ á€œá€±á€¸ á€•á€« ğŸ˜œğŸ˜œğŸ˜œğŸ˜†ğŸ˜†ğŸ˜†
-0.5258407      á€› á€á€¬ á€€á€¼á€­á€¯á€€á€º á€á€²á€· ğŸ®
-1.0829955      á€”á€„á€º á€œá€Šá€ºá€¸ á€•á€« á€á€šá€º ğŸ‘Œ
-0.5955442      á€šá€¬á€¸ á€•á€¼ á€•á€« á€”á€²á€· ğŸ‘Œ
-0.60018754     á€œ á€™ á€á€…á€º á€€á€±á€¬á€„á€º â€¦ğŸ˜¡ğŸ˜¡ğŸ˜¡ğŸ˜¡
-0.41162136     á€™ á€šá€·á€º á€á€±á€«á€„á€ºá€¸ á€™á€»á€­á€¯á€¸ ğŸ¤£ğŸ¤£ğŸ¤Œ
-0.8666703      á€œá€­á€¯á€· á€ á€”á€¬á€¸ á€™á€­ ğŸ˜ğŸ¤Œ
-1.037431       á€•á€¼á€±á€¬ á€™á€­ á€•á€¼á€”á€º á€•á€¼á€® ğŸ¤­ğŸ¤£
-1.5954549      á€Ÿá€¯á€á€º á€á€¬ á€á€²á€· á€œá€¬á€¸ ğŸ¤‘ğŸ¤‘ğŸ¤‘ğŸ˜’ğŸ˜’
-0.5657399      á€á€­á€¯á€œá€º á€€ á€… á€•á€¼á€® ğŸ˜ğŸ˜
-0.43753234     á€á€½á€± á€á€»á€Šá€ºá€¸ á€•á€² á€–á€¼á€á€º -á€­á€¯á€€á€º
-0.5231397      á€œá€± â€Œ á€– á€œ á€™ğŸ–•ğŸ¿
-2.2860413      á€€ á€”á€·á€º á€œ á€”á€·á€º á€–á€»á€²
-0.2854472      á€›á€¾á€­ á€˜á€°á€¸ á€”á€±á€¬á€º ğŸ˜ ğŸ™Œ
-0.30083752     á€á€½á€± á€… á€–á€¯ á€•á€² ğŸ‘‰
-0.5127779      á€œá€­á€¯á€€á€º á€–á€¯á€”á€º á€›á€¾á€¯ á€œá€­á€¯á€€á€º ğŸ™‚ğŸ˜ğŸ˜
-0.60587126     á€€á€­á€¯á€¸ á€á€¶ á€œá€­á€¯á€€á€º á€•á€« âœ‹
-0.45228755     á€™ á€”á€¬ á€á€¶ á€”á€²á€· -á€»á€„á€º
-0.39421624     á€€ á€˜á€°á€¸ â€Œá€± - á€œá€¬á€º
-0.44281816     á€¡á€¬á€¸ á€á€”á€ºá€¸ á€…á€±á€¬á€€á€º á€™ ğŸ–•ğŸ–•ğŸ¤¬ğŸ¤¬
-0.60911703     á€€á€¼á€­á€¯ á€•á€¼á€®á€¸ á€á€¬á€¸ á€•á€² ğŸ¦­

\end\
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc$
```

## Preparing Test Datasets

I already have 5 test outputs with GPT-2 Hatespeech Model. At first, I have to make syllable segmentation on these 5 files.   

Copying test data to the current PPL calculation folder as follows:   

```
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/script/sentence$ ls
Test-1  Test-2  Test-3  Test-4  Test-5
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/script/sentence$ cp * ../../ppl_calc/testdata/
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/script/sentence$
```

I need only 1st column of these files for evaluation with LM.   

```
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc/testdata$ head -n 3 Test-1
á€™á€”á€€á€º á… á€”á€¬á€›á€® á€á€¯ á€‘á€­ á€™ á€œá€¬ á€˜á€°á€¸ á… á€™á€­á€”á€…á€º á… á€”á€¬á€›á€® á€‘á€­ á€•á€»á€€á€º á€á€½á€¬á€¸ á€¡á€±á€¬á€„á€º á€•á€±á€¸ á€á€¬ á€œá€¬á€¸ á€œá€®á€¸ á€•á€² á€Ÿá€±á€· á€™á€¡á€±á€œá€­á€¯á€¸ á€á€½á€±á€•á€»á€€á€º á€á€½á€¬á€¸ á€•á€¼á€® á€•á€¼á€”á€º á€–á€»á€€á€º á€á€œá€­á€¯ á€•á€²á€±á€¬á€„á€º á€™ á€•á€¼á€Šá€·á€º á€á€±á€¬á€· á€˜á€°á€¸ á€™á€¡á€±á€œá€­á€¯á€¸ á€á€½á€± á€™á€®á€¸ á€”á€¬á€›á€® á€•á€¼á€”á€º á€•á€»á€€á€º á€á€šá€º á€†á€­á€¯ á€á€±á€¬á€· á€™ á€á€­á€á€€á€º á€œá€Šá€ºá€¸ á€•á€»á€€á€º á€•á€¼á€® á€œá€®á€¸ á€•á€² á€Ÿá€±á€·     ab
á€™á€¡á€±á€œá€­á€¯á€¸ á€á€½á€± á€™á€®á€á€¬á€ á€€á€»á€á€±á€¬á€· á€•á€¼á€Šá€ºá€á€° á€á€½á€± á€¡á€€á€¯á€”á€ºá€œá€¯á€¶á€¸ á€á€¯ á€™á€®á€¸ á€œá€¬ á€™á€šá€ºá€· á€¡á€á€»á€­á€”á€º á€™á€¾á€”á€º á€¡á€­á€•á€º á€•á€±á€¸ á€•á€¼á€® á€”á€±á€¬á€º á€™á€®á€¸ á€•á€»á€€á€º á€”á€± á€á€¬á€± á€›á€±     ab
á€™á€¡á€±á€œá€­á€¯á€¸ á€á€½á€± á€á€…á€º á€”á€±á€€á€¯á€”á€º á€•á€»á€€á€º á‰ á€”á€¬á€›á€® á€œá€¬ á€•á€¼á€®á€¸ á‰ á€”á€¬á€›á€® á€á€±á€¬á€· á€™á€¾á€¬ á€œá€¬ á€–á€¼á€á€º á€”á€± á€á€¬ á€•á€²     ab
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc/testdata$
```

PPL á€á€½á€€á€ºá€–á€­á€¯á€·á€¡á€á€½á€€á€º test data á€€á€­á€¯ á€•á€¼á€„á€ºá€†á€„á€ºá€á€²á€·á€¡á€á€«á€™á€¾á€¬ hatespeech tag á€á€½á€±á€€ á€™á€œá€­á€¯á€¡á€•á€ºá€•á€² á€™á€¼á€”á€ºá€™á€¬á€…á€¬ á€…á€¬á€€á€¼á€±á€¬á€„á€ºá€¸á€•á€² á€á€®á€¸á€á€”á€ºá€· á€œá€­á€¯á€¡á€•á€ºá€á€¬á€™á€­á€¯á€·á€œá€­á€¯á€· ...  
Cut Column-1 only ...   

```
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc/testdata$ cut -f1 ./original/Test-
1 > ./Test-1
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc/testdata$ cut -f1 ./original/Test-2 > ./Test-2
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc/testdata$ cut -f1 ./original/Test-3 > ./Test-3
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc/testdata$ cut -f1 ./original/Test-4 > ./Test-4
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc/testdata$ cut -f1 ./original/Test-5 > ./Test-5
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc/testdata$
```

Check the file contents before syllable breaking ...   

```
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc/testdata$ head -n 3 Test-1
á€™á€”á€€á€º á… á€”á€¬á€›á€® á€á€¯ á€‘á€­ á€™ á€œá€¬ á€˜á€°á€¸ á… á€™á€­á€”á€…á€º á… á€”á€¬á€›á€® á€‘á€­ á€•á€»á€€á€º á€á€½á€¬á€¸ á€¡á€±á€¬á€„á€º á€•á€±á€¸ á€á€¬ á€œá€¬á€¸ á€œá€®á€¸ á€•á€² á€Ÿá€±á€· á€™á€¡á€±á€œá€­á€¯á€¸ á€á€½á€±á€•á€»á€€á€º á€á€½á€¬á€¸ á€•á€¼á€® á€•á€¼á€”á€º á€–á€»á€€á€º á€á€œá€­á€¯ á€•á€²á€±á€¬á€„á€º á€™ á€•á€¼á€Šá€·á€º á€á€±á€¬á€· á€˜á€°á€¸ á€™á€¡á€±á€œá€­á€¯á€¸ á€á€½á€± á€™á€®á€¸ á€”á€¬á€›á€® á€•á€¼á€”á€º á€•á€»á€€á€º á€á€šá€º á€†á€­á€¯ á€á€±á€¬á€· á€™ á€á€­á€á€€á€º á€œá€Šá€ºá€¸ á€•á€»á€€á€º á€•á€¼á€® á€œá€®á€¸ á€•á€² á€Ÿá€±á€·
á€™á€¡á€±á€œá€­á€¯á€¸ á€á€½á€± á€™á€®á€á€¬á€ á€€á€»á€á€±á€¬á€· á€•á€¼á€Šá€ºá€á€° á€á€½á€± á€¡á€€á€¯á€”á€ºá€œá€¯á€¶á€¸ á€á€¯ á€™á€®á€¸ á€œá€¬ á€™á€šá€ºá€· á€¡á€á€»á€­á€”á€º á€™á€¾á€”á€º á€¡á€­á€•á€º á€•á€±á€¸ á€•á€¼á€® á€”á€±á€¬á€º á€™á€®á€¸ á€•á€»á€€á€º á€”á€± á€á€¬á€± á€›á€±
á€™á€¡á€±á€œá€­á€¯á€¸ á€á€½á€± á€á€…á€º á€”á€±á€€á€¯á€”á€º á€•á€»á€€á€º á‰ á€”á€¬á€›á€® á€œá€¬ á€•á€¼á€®á€¸ á‰ á€”á€¬á€›á€® á€á€±á€¬á€· á€™á€¾á€¬ á€œá€¬ á€–á€¼á€á€º á€”á€± á€á€¬ á€•á€²
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc/testdata$ head -n 3 Test-5
á€™á€”á€€á€º á… á€”á€¬á€›á€® á€á€¯ á€‘á€­ á€™ á€œá€¬ á€˜á€°á€¸ á… á€™á€­á€”á€…á€º á… á€”á€¬á€›á€® á€‘á€­ á€•á€»á€€á€º á€á€½á€¬á€¸ á€¡á€±á€¬á€„á€º á€•á€±á€¸ á€á€¬ á€œá€¬á€¸ á€œá€®á€¸ á€•á€² á€Ÿá€±á€· á€™á€¡á€±á€œá€­á€¯á€¸ á€á€½á€±
á€™á€®á€¸ á€•á€»á€€á€º á€á€½á€¬á€¸ á€•á€¼á€® á€•á€¼á€”á€º á€–á€»á€€á€º á€á€œá€­á€¯ á€•á€²
á€™á€®á€¸ á€œá€¬ á€› á€™á€¾á€¬ á€™á€®á€¸ á€•á€±á€¸ á€•á€¼á€®á€¸ á… á€™á€­á€”á€…á€º á€á€±á€¬á€„á€º á€™ á€•á€¼á€Šá€·á€º á€á€±á€¬á€· á€˜á€°á€¸ á€™á€¡á€±á€œá€­á€¯á€¸ á€á€½á€± á€™á€®á€¸ á€”á€¬á€›á€® á€•á€¼á€”á€º á€•á€»á€€á€º á€á€šá€º á€†á€­á€¯ á€á€±á€¬á€· á€™ á€á€­ á€›á€„á€º á€œá€Šá€ºá€¸ á€”á€¬á€›á€®á€á€€á€º á€œá€Šá€ºá€¸ á€•á€»á€€á€º á€•á€¼á€® á€œá€®á€¸ á€•á€² á€Ÿá€±á€·
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc/testdata$ tail -n 3 Test-4
á€˜á€¯á€”á€ºá€¸á€€á€¼á€®á€¸ á€€ á€á€±á€¬á€· á€™á€„á€ºá€¸ á€á€­á€¯á€· á€€ á€˜á€šá€ºá€œá€­á€¯ á€¡á€Ÿá€¯á€á€º á€™á€¾á€¬ á€œá€² á€€á€»á€±á€”á€•á€º á€™ á€†á€­á€¯á€„á€º á€á€¬ á€”á€²á€· á€á€…á€º á€šá€±á€¬á€€á€º á€™á€¾á€¬ á€œá€±á€¸á€…á€¬á€¸ á€•á€« á€á€šá€º
á€œá€° á€€ á€›á€±á€¬ á€”á€„á€º á€á€­á€¯á€· á€á€…á€º á€šá€±á€¬á€€á€º á€€ á€¡á€…á€¬á€¸ á€–á€°á€¸ á€á€¯á€”á€ºá€¸ á€€ á€€á€­á€¯á€šá€ºá€· á€¡á€™á€»á€¬á€¸á€€á€¼á€®á€¸ á€œá€­á€¯á€· á€› á€á€šá€º á€›á€¾á€„á€ºá€¸ á€•á€±á€«á€º á€€ á€”á€± á€™á€¼á€”á€ºá€™á€¬ á€œá€°á€™á€»á€­á€¯á€¸ á€á€½á€± á€€ á€á€° á€á€­á€¯á€· á€”á€­á€¯á€„á€ºá€„á€¶ á€œá€±á€¸ á€á€½á€± á€€ á€œá€¯á€•á€º á€á€²á€· á€› á€œá€± á€”á€± á€œá€­á€¯á€· á€¡á€™á€± á€™ á€Ÿá€¯á€á€º á€˜á€°á€¸ á€á€²á€· á€á€° á€á€½á€± á€á€° á€á€­á€¯á€· á€¡á€á€½á€€á€º á€á€±á€¬á€„á€º á€™ á€…á€¬á€¸ á€œá€­á€¯á€· á€œá€¬á€¸ á€”á€±á€¬á€º
á€¡á€á€¯ á€™á€¾ á€á€”á€ºá€· á€á€¬ á€•á€² á€™á€¼á€”á€ºá€™á€¬ á€•á€¼á€Šá€º á€™á€¾á€¬ á€•á€² á€œá€± á€™á€¡á€œ á€€á€¼á€®á€¸ á€›á€¬ á€á€»á€„á€º á€…á€›á€¬
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc/testdata$
```

## Syllable Breaking on Testsets

separator á€€á€­á€¯ space á€‘á€¬á€¸á€•á€¼á€®á€¸ á€–á€¼á€á€ºá€›á€•á€«á€™á€šá€ºá‹  

```
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc/testdata$ perl ../sylbreak.pl -i ./f1/Test-1 -s " " > Test-1.syl
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc/testdata$ perl ../sylbreak.pl -i ./f1/Test-2 -s " " > Test-2.syl
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc/testdata$ perl ../sylbreak.pl -i ./f1/Test-3 -s " " > Test-3.syl
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc/testdata$ perl ../sylbreak.pl -i ./f1/Test-4 -s " " > Test-4.syl
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc/testdata$ perl ../sylbreak.pl -i ./f1/Test-5 -s " " > Test-5.syl
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc/testdata$
```

Check the syllable breaked test data:   

```
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc/testdata$ ls
f1  original  Test-1.syl  Test-2.syl  Test-3.syl  Test-4.syl  Test-5.syl
```

```
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc/testdata$ head -n 3 ./Test-1.syl
á€™ á€”á€€á€º á… á€”á€¬ á€›á€® á€á€¯ á€‘á€­ á€™ á€œá€¬ á€˜á€°á€¸ á… á€™á€­ á€”á€…á€º á… á€”á€¬ á€›á€® á€‘á€­ á€•á€»á€€á€º á€á€½á€¬á€¸ á€¡á€±á€¬á€„á€º á€•á€±á€¸ á€á€¬ á€œá€¬á€¸ á€œá€®á€¸ á€•á€² á€Ÿá€±á€· á€™ á€¡á€± á€œá€­á€¯á€¸ á€á€½á€± á€•á€»á€€á€º á€á€½á€¬á€¸ á€•á€¼á€® á€•á€¼á€”á€º á€–á€»á€€á€º á€ á€œá€­á€¯ á€•á€²á€±á€¬á€„á€º á€™ á€•á€¼ á€Šá€·á€º á€á€±á€¬á€· á€˜á€°á€¸ á€™ á€¡á€± á€œá€­á€¯á€¸ á€á€½á€± á€™á€®á€¸ á€”á€¬ á€›á€® á€•á€¼á€”á€º á€•á€»á€€á€º á€á€šá€º á€†á€­á€¯ á€á€±á€¬á€· á€™ á€á€­ á€á€€á€º á€œá€Šá€ºá€¸ á€•á€»á€€á€º á€•á€¼á€® á€œá€®á€¸ á€•á€² á€Ÿá€±á€·
á€™ á€¡á€± á€œá€­á€¯á€¸ á€á€½á€± á€™á€® á€á€¬ á€ á€€á€» á€á€±á€¬á€· á€•á€¼á€Šá€º á€á€° á€á€½á€± á€¡ á€€á€¯á€”á€º á€œá€¯á€¶á€¸ á€á€¯ á€™á€®á€¸ á€œá€¬ á€™á€šá€ºá€· á€¡ á€á€»á€­á€”á€º á€™á€¾á€”á€º á€¡á€­á€•á€º á€•á€±á€¸ á€•á€¼á€® á€”á€±á€¬á€º á€™á€®á€¸ á€•á€»á€€á€º á€”á€± á€á€¬á€± á€›á€±
á€™ á€¡á€± á€œá€­á€¯á€¸ á€á€½á€± á€á€…á€º á€”á€± á€€á€¯á€”á€º á€•á€»á€€á€º á‰ á€”á€¬ á€›á€® á€œá€¬ á€•á€¼á€®á€¸ á‰ á€”á€¬ á€›á€® á€á€±á€¬á€· á€™á€¾á€¬ á€œá€¬ á€–á€¼á€á€º á€”á€± á€á€¬ á€•á€²
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc/testdata$ head -n 3 ./Test-3.syl
á€™ á€”á€€á€º á… á€”á€¬ á€›á€® á€á€¯ á€‘á€­ á€™ á€œá€¬ á€˜á€°á€¸ á… á€™á€­ á€”á€…á€º á… á€”á€¬ á€›á€® á€‘á€­ á€•á€»á€€á€º á€á€½á€¬á€¸ á€¡á€±á€¬á€„á€º á€•á€±á€¸ á€á€¬ á€œá€¬á€¸ á€œá€®á€¸ á€•á€² á€Ÿá€±á€· á€™ á€¡á€± á€œá€­á€¯á€¸ á€á€½á€±
á€™á€®á€¸ á€•á€»á€€á€º á€á€½á€¬á€¸ á€•á€¼á€® á€•á€¼á€”á€º á€–á€»á€€á€º á€ á€œá€­á€¯ á€•á€²
á€™á€®á€¸ á€œá€¬ á€› á€™á€¾á€¬ á€™á€®á€¸ á€•á€±á€¸ á€•á€¼á€®á€¸ á… á€™á€­ á€”á€…á€º á€á€±á€¬á€„á€º á€™ á€•á€¼ á€Šá€·á€º á€á€±á€¬á€· á€˜á€°á€¸ á€™ á€¡á€± á€œá€­á€¯á€¸ á€á€½á€± á€™á€®á€¸ á€”á€¬ á€›á€® á€•á€¼á€”á€º á€•á€»á€€á€º á€á€šá€º á€†á€­á€¯ á€á€±á€¬á€· á€™ á€á€­ á€›á€„á€º á€œá€Šá€ºá€¸ á€”á€¬ á€›á€® á€á€€á€º á€œá€Šá€ºá€¸ á€•á€»á€€á€º á€•á€¼á€® á€œá€®á€¸ á€•á€² á€Ÿá€±á€·
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc/testdata$ head -n 3 ./Test-5.syl
á€™ á€”á€€á€º á… á€”á€¬ á€›á€® á€á€¯ á€‘á€­ á€™ á€œá€¬ á€˜á€°á€¸ á… á€™á€­ á€”á€…á€º á… á€”á€¬ á€›á€® á€‘á€­ á€•á€»á€€á€º á€á€½á€¬á€¸ á€¡á€±á€¬á€„á€º á€•á€±á€¸ á€á€¬ á€œá€¬á€¸ á€œá€®á€¸ á€•á€² á€Ÿá€±á€· á€™ á€¡á€± á€œá€­á€¯á€¸ á€á€½á€±
á€™á€®á€¸ á€•á€»á€€á€º á€á€½á€¬á€¸ á€•á€¼á€® á€•á€¼á€”á€º á€–á€»á€€á€º á€ á€œá€­á€¯ á€•á€²
á€™á€®á€¸ á€œá€¬ á€› á€™á€¾á€¬ á€™á€®á€¸ á€•á€±á€¸ á€•á€¼á€®á€¸ á… á€™á€­ á€”á€…á€º á€á€±á€¬á€„á€º á€™ á€•á€¼ á€Šá€·á€º á€á€±á€¬á€· á€˜á€°á€¸ á€™ á€¡á€± á€œá€­á€¯á€¸ á€á€½á€± á€™á€®á€¸ á€”á€¬ á€›á€® á€•á€¼á€”á€º á€•á€»á€€á€º á€á€šá€º á€†á€­á€¯ á€á€±á€¬á€· á€™ á€á€­ á€›á€„á€º á€œá€Šá€ºá€¸ á€”á€¬ á€›á€® á€á€€á€º á€œá€Šá€ºá€¸ á€•á€»á€€á€º á€•á€¼á€® á€œá€®á€¸ á€•á€² á€Ÿá€±á€·
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc/testdata$ tail -n 3 ./Test-4.syl
á€˜á€¯á€”á€ºá€¸ á€€á€¼á€®á€¸ á€€ á€á€±á€¬á€· á€™á€„á€ºá€¸ á€á€­á€¯á€· á€€ á€˜á€šá€º á€œá€­á€¯ á€¡ á€Ÿá€¯á€á€º á€™á€¾á€¬ á€œá€² á€€á€»á€± á€”á€•á€º á€™ á€†á€­á€¯á€„á€º á€á€¬ á€”á€²á€· á€á€…á€º á€šá€±á€¬á€€á€º á€™á€¾á€¬ á€œá€±á€¸ á€…á€¬á€¸ á€•á€« á€á€šá€º
á€œá€° á€€ á€›á€±á€¬ á€”á€„á€º á€á€­á€¯á€· á€á€…á€º á€šá€±á€¬á€€á€º á€€ á€¡ á€…á€¬á€¸ á€–á€°á€¸ á€á€¯á€”á€ºá€¸ á€€ á€€á€­á€¯á€šá€ºá€· á€¡ á€™á€»á€¬á€¸ á€€á€¼á€®á€¸ á€œá€­á€¯á€· á€› á€á€šá€º á€›á€¾á€„á€ºá€¸ á€•á€±á€«á€º á€€ á€”á€± á€™á€¼á€”á€º á€™á€¬ á€œá€° á€™á€»á€­á€¯á€¸ á€á€½á€± á€€ á€á€° á€á€­á€¯á€· á€”á€­á€¯á€„á€º á€„á€¶ á€œá€±á€¸ á€á€½á€± á€€ á€œá€¯á€•á€º á€á€²á€· á€› á€œá€± á€”á€± á€œá€­á€¯á€· á€¡ á€™á€± á€™ á€Ÿá€¯á€á€º á€˜á€°á€¸ á€á€²á€· á€á€° á€á€½á€± á€á€° á€á€­á€¯á€· á€¡ á€á€½á€€á€º á€á€±á€¬á€„á€º á€™ á€…á€¬á€¸ á€œá€­á€¯á€· á€œá€¬á€¸ á€”á€±á€¬á€º
á€¡ á€á€¯ á€™á€¾ á€á€”á€ºá€· á€á€¬ á€•á€² á€™á€¼á€”á€º á€™á€¬ á€•á€¼á€Šá€º á€™á€¾á€¬ á€•á€² á€œá€± á€™ á€¡ á€œ á€€á€¼á€®á€¸ á€›á€¬ á€á€»á€„á€º á€… á€›á€¬
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc/testdata$
```

## Writing a Bash Shell Script

shell script á€›á€²á€· á€–á€­á€¯á€„á€ºá€”á€¬á€™á€Šá€ºá€€á€­á€¯ eval_with_ppl.sh á€†á€­á€¯á€•á€¼á€®á€¸ á€•á€±á€¸á€‘á€¬á€¸á€á€²á€·á€á€šá€ºá‹  

```bash
#!/bin/bash

## Written by Ye Kyaw Thu, LU Lab., Myanmar
## You have to install KenLM in advance.
## For evaluation with PPL on GPT-2 Hatespeech Model generated sentences
## Last updated: 23 Oct 2023

# Check if the folder name argument is provided
if [[ -z "$1" ]]; then
    echo "Error: No folder name provided."
    echo "Usage: $0 <folder-name>"
    exit 1
fi

# Ensure the folder exists
if [[ ! -d "$1" ]]; then
    echo "Error: Folder '$1' does not exist."
    exit 1
fi

# Loop through all .syl files in the specified folder, in alphabetical order
for file in $(find "$1" -name '*.syl' | sort); do
    echo "Evaluation on: $file"
    command="query -v summary ./lm.5gram.arpa < $file"
    echo "Running: $command"
    eval $command
    echo "==========";
    echo "";
done
```

## Evaluation with PPL

Perplexity á€”á€²á€· evaluation á€›á€œá€’á€ºá€á€½á€±á€€ á€¡á€±á€¬á€€á€ºá€•á€«á€¡á€á€­á€¯á€„á€ºá€¸á€•á€«á‹  

```
(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc$ ./eval_with_ppl.sh ./testdata/
Evaluation on: ./testdata/Test-1.syl
Running: query -v summary ./lm.5gram.arpa < ./testdata/Test-1.syl
Loading the LM will be faster if you build a binary file.
Reading ./lm.5gram.arpa
----5---10---15---20---25---30---35---40---45---50---55---60---65---70---75---80---85---90---95--100
****************************************************************************************************
Perplexity including OOVs:      55.28534226369465
Perplexity excluding OOVs:      53.14884888068335
OOVs:   3
Tokens: 997
Name:query      VmPeak:238648 kB        VmRSS:4144 kB   RSSMax:233052 kB        user:2.74644      sys:0.08795     CPU:2.83441     real:2.83355
==========

Evaluation on: ./testdata/Test-2.syl
Running: query -v summary ./lm.5gram.arpa < ./testdata/Test-2.syl
Loading the LM will be faster if you build a binary file.
Reading ./lm.5gram.arpa
----5---10---15---20---25---30---35---40---45---50---55---60---65---70---75---80---85---90---95--100
****************************************************************************************************
Perplexity including OOVs:      48.190194748201066
Perplexity excluding OOVs:      47.63006610357866
OOVs:   1
Tokens: 1130
Name:query      VmPeak:238648 kB        VmRSS:4212 kB   RSSMax:233188 kB        user:2.73601      sys:0.088       CPU:2.82403     real:2.82336
==========

Evaluation on: ./testdata/Test-3.syl
Running: query -v summary ./lm.5gram.arpa < ./testdata/Test-3.syl
Loading the LM will be faster if you build a binary file.
Reading ./lm.5gram.arpa
----5---10---15---20---25---30---35---40---45---50---55---60---65---70---75---80---85---90---95--100
****************************************************************************************************
Perplexity including OOVs:      48.190194748201066
Perplexity excluding OOVs:      47.63006610357866
OOVs:   1
Tokens: 1130
Name:query      VmPeak:238648 kB        VmRSS:4304 kB   RSSMax:233428 kB        user:2.85088      sys:0.071971    CPU:2.9229      real:2.92227
==========

Evaluation on: ./testdata/Test-4.syl
Running: query -v summary ./lm.5gram.arpa < ./testdata/Test-4.syl
Loading the LM will be faster if you build a binary file.
Reading ./lm.5gram.arpa
----5---10---15---20---25---30---35---40---45---50---55---60---65---70---75---80---85---90---95--100
****************************************************************************************************
Perplexity including OOVs:      48.190194748201066
Perplexity excluding OOVs:      47.63006610357866
OOVs:   1
Tokens: 1130
Name:query      VmPeak:238648 kB        VmRSS:3984 kB   RSSMax:233084 kB        user:2.73172      sys:0.087991    CPU:2.81975     real:2.81901
==========

Evaluation on: ./testdata/Test-5.syl
Running: query -v summary ./lm.5gram.arpa < ./testdata/Test-5.syl
Loading the LM will be faster if you build a binary file.
Reading ./lm.5gram.arpa
----5---10---15---20---25---30---35---40---45---50---55---60---65---70---75---80---85---90---95--100
****************************************************************************************************
Perplexity including OOVs:      48.190194748201066
Perplexity excluding OOVs:      47.63006610357866
OOVs:   1
Tokens: 1130
Name:query      VmPeak:238648 kB        VmRSS:4372 kB   RSSMax:233484 kB        user:2.72437      sys:0.100013    CPU:2.82442     real:2.82386
==========

(base) ye@lst-gpu-3090:~/exp/myHatespeech/eval/ppl_calc$
```

GPT-2 model á€”á€²á€· hatespeech generation á€€á€­á€¯ á…á€á€« á€…á€™á€ºá€¸á€œá€¯á€•á€ºá€á€²á€·á€á€¬á€™á€­á€¯á€·á€œá€­á€¯ á€‘á€½á€€á€ºá€œá€¬á€á€²á€· á€…á€¬á€€á€¼á€±á€¬á€„á€ºá€¸á€á€½á€±á€€á€­á€¯ LM á€á€¯á€¶á€¸á€•á€¼á€®á€¸ PPL á€”á€²á€· evaluation á€œá€¯á€•á€ºá€á€¬á€á€±á€¬á€· á€•á€¼á€®á€¸á€á€½á€¬á€¸á€•á€¼á€®á‹  

## To Do

- hatespeech corpus, in-hourse corpus á€‘á€²á€€ emoji á€”á€²á€· symbol á€á€½á€±á€€á€­á€¯á€•á€« á€á€…á€ºá€œá€¯á€¶á€¸á€á€»á€„á€ºá€¸á€…á€® á€–á€¼á€á€ºá€•á€¼á€®á€¸ Language model á€†á€±á€¬á€€á€ºá€•á€¼á€®á€¸ á€¡á€²á€’á€®á€™á€±á€¬á€ºá€’á€šá€ºá€”á€²á€· evaluation á€œá€¯á€•á€ºá€€á€¼á€Šá€ºá€·á€›á€”á€ºá‹

